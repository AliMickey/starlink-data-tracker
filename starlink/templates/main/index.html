{% extends 'builders/base.html' %}

{% block title %}Starlink Versions{% endblock %}

{% block scriptsHead %}
  <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
{% endblock %}

{% block content %}
  <div class="col-11 text-center">
    <p class="fs-1 fw-bold">Starlink Versions</p>
    <img class="rounded mx-auto d-block w-25" src="{{ url_for('static', filename='img/dishy_space.jpg') }}" alt="Logo">
    <br><br>
    <p class="fs-4"> Recent Dishy (Antenna) Firmware</p>
    <table class="table table-striped table-bordered" id="dataTable">
      <thead>
        <tr>
          <th>Added (UTC)</th>
          <th>Version</th>
          <th>Discussion</th>
        </tr>
      </thead>
      <tbody>
        {% for id, details in listDict.items() %}
        <tr>
          <td>{{ details['dateAdded'] }} <p hidden>{{ details['id'] }}</p></td>
          <td>
            {% if request.MOBILE == True %}
                <button type="button" class="btn btn-secondary" data-bs-toggle="tooltip" data-bs-placement="top" title="{{ details['version'] }}">
                  <tt>{{ details['version'][:8] }}</tt>
                </button>
            {% else %}
              <tt><b>{{ details['version'][:8] }}</b>{{ details['version'][8:] }}</tt>
              <a class="float-end" onclick="myFunction('{{details['version']}}')" role="button" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="left" data-bs-content="Copied to clipboard"><img src="{{ url_for('static', filename='img/copy.png') }}" alt="Copy Icon"></a>
            {% endif %} 
          </td>
          <td>
            {% if details['reddit'] %}
              <a href="{{ details['reddit'] }}" target="_blank"><img src="{{ url_for('static', filename='img/reddit.png') }}" width="30px"></a>
            {% else %}
              <p>N/A</p>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <footer class="footer  border-top text-center mt-auto py-3">
      <span class="text-muted">
          This site is NOT affiliated with Starlink or SpaceX. View the source code for this website on <a class="text-decoration-none" href="https://github.com/AliMickey/starlink-firmware-track" target="_blank">GitHub</a>
      </span>
    </footer>
  </div>
{% endblock %}

{% block scriptsBody %}
  <script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    })
  </script>
  <script>
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
      return new bootstrap.Popover(popoverTriggerEl)
    })
    var popover = new bootstrap.Popover(document.querySelector('.popover-dismiss'), {
      trigger: 'focus'
    })
  </script>
  <script>
    function myFunction(text) {
      var dummy = document.createElement("textarea");
      document.body.appendChild(dummy);
      dummy.value = text;
      dummy.select();
      document.execCommand("copy");
      document.body.removeChild(dummy);
    } 
  </script>
{% endblock %}